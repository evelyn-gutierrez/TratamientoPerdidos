## ---------------------------------------------------------------------------------------------------------------------
notas <- data.frame(nombre = c("Jesus", "Carla", "Rodrigo", "Javier"),
                    nota = c(12, 15, 13, NA))
notas


## ---------------------------------------------------------------------------------------------------------------------
notas_comp <- notas[complete.cases(notas),]
notas_comp


## ---------------------------------------------------------------------------------------------------------------------
data(sleep, package = "VIM")

head(sleep)


## ---------------------------------------------------------------------------------------------------------------------
str(sleep)
dplyr::glimpse(sleep)
summary(sleep)


## ---------------------------------------------------------------------------------------------------------------------
apply(sleep, 2, function(x){sum(is.na(x))})


## ----out.width='80%'--------------------------------------------------------------------------------------------------
mice::md.pattern(sleep, rotate.names=TRUE)
mice::md.pairs(sleep)


## ---------------------------------------------------------------------------------------------------------------------
sleep_aggr <- VIM::aggr(sleep, col = mice::mdc(1:2), numbers = TRUE, 
                        sortVars = TRUE, labels = names(sleep),
                        cex.axis= 0.7, gap = 3,
                        ylab = c("Proporción de Pérdida",
                                 "Patrón de Pérdida"))


## ---------------------------------------------------------------------------------------------------------------------
VIM::marginplot(sleep[ , c(3, 7)], pch = 19)
VIM::marginplot(sleep[ , c(3, 7)], col = c("blue", "red", "orange"), pch = 20)


## ----warning=FALSE----------------------------------------------------------------------------------------------------
library(Hmisc)


## ---------------------------------------------------------------------------------------------------------------------
notas$nota_imp <- with(notas, impute(nota, mean))
notas


## ---------------------------------------------------------------------------------------------------------------------
notas$nota_imp <- with(notas, impute(nota, 'random'))
notas


## ---------------------------------------------------------------------------------------------------------------------
notas$nota_imp <- with(notas, impute(nota, 99))
notas


## ---------------------------------------------------------------------------------------------------------------------
notas$nota[is.na(notas$nota)] <- mean(notas$nota, na.rm = T)
notas


## ---------------------------------------------------------------------------------------------------------------------
library(mice) 
imp <- mice(sleep, method = "norm.predict", m = 1) # Impute data
imp_reg <- complete(imp)


## ---------------------------------------------------------------------------------------------------------------------
library(DMwR)
sleep_imp <- DMwR::knnImputation(sleep)
#View(sleep_imp)
summary(sleep_imp)


## ---------------------------------------------------------------------------------------------------------------------
apply(sleep_imp, 2, function(x){sum(is.na(x))})


## ---------------------------------------------------------------------------------------------------------------------
library(missForest)
sleep_imp_rf <- missForest(sleep)
print(sleep_imp$NonD, digits = 3)


## ---------------------------------------------------------------------------------------------------------------------
library(VIM)
library(mice)


## ---------------------------------------------------------------------------------------------------------------------
library(mice)


## ---------------------------------------------------------------------------------------------------------------------
imp1 <- mice(sleep, m = 5, seed = 2)
imp1


## ---------------------------------------------------------------------------------------------------------------------
imp1$method


## ---------------------------------------------------------------------------------------------------------------------
head(imp1$imp$NonD)


## ---------------------------------------------------------------------------------------------------------------------
library(lattice)
xyplot(imp1, Gest ~ NonD | .imp, pch = 20, cex = 1.4)


## ----out.width='70%'--------------------------------------------------------------------------------------------------
xyplot(imp1, Gest ~ NonD, pch = 18)
xyplot(imp1, Gest ~ NonD + Span, pch = 18)


## ---------------------------------------------------------------------------------------------------------------------
densityplot(imp1)


## ---------------------------------------------------------------------------------------------------------------------
stripplot(imp1, pch = 20)


## ---------------------------------------------------------------------------------------------------------------------
ajuste_cc <- lm(BodyWgt ~ Sleep + BrainWgt, 
                data = na.omit(sleep))
summary(ajuste_cc)


## ---------------------------------------------------------------------------------------------------------------------
ajuste_cc <- lm(BodyWgt ~ Sleep + BrainWgt, data = imp_reg)
summary(ajuste_cc)


## ---------------------------------------------------------------------------------------------------------------------
ajuste_imp <- with(imp1, lm( BodyWgt ~ Sleep + BrainWgt))
summary(ajuste_imp)


## ---------------------------------------------------------------------------------------------------------------------
ajuste_comb <- pool(ajuste_imp)
summary(ajuste_comb)
pool.r.squared(ajuste_imp)

